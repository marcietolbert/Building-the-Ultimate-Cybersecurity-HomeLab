# SEC, SOC, Malware Analysis VM Setup

Welcome to **Lab 00**, the inaugural lab in the **Building the Ultimate Cybersecurity HomeLab** series. In this guided session, I will walk you through the steps to download and configure six distinct virtual machines that will be hosted on VMware Workstation Pro. Additionally, I will provide clear instructions on how to download and set up VMware Workstation Pro itself.

Before diving into the configuration process, we’ll take a moment to explore the logical structure of our lab network. This visual representation will help you understand how the various components interact with one another. To create this logical diagram, we will use Draw.io, a user-friendly online diagramming tool. Let’s get started!

## Network Diagram



## Mandatory System Requirements

The mandatory system requirements for your host machine are as follows: 
- **RAM:** 32 GB (gigabytes) of RAM or **higher**
- **CPU:** 64-BIT 2.0+ GHz processor or ***higher**
- **Disk:** 500GB of SSD or **higher**

## Lab Environment
- VMware Workstation Pro (Hypervisor)
- Kali (Attack Machine)
- Metasploitable (Vulnerable Target)
- FLARE VM (Win10 | Reverse Engineering/Sandboxed Malware Analysis Machine)
- Unbuntu Client (Workstation)
- Ubuntu Server (Wazuh | SIEM/Security Monitoring)
- Security Onion (Threat Hunting | Security Monitoring | Log Management)

## VMware Download and Configuration

To kick off the lab, we will first install and configure VMware Workstation Pro, an application that enables us to create and manage multiple virtual machines on a single physical computer.

### Setup

- Go to the <a href="https://www.vmware.com/products/desktop-hypervisor/workstation-and-fusion">VMware Workstation Pro</a> download page and click *DOWNLOAD FUSION OR WORKSTATION*.
<img width="639" alt="4d0oQh7S3j" src="https://github.com/user-attachments/assets/803348d5-6f0b-47d9-9603-b81a5faa5264"/>
<br>
<br>

- A Broadcom account is required to download VMware Workstation Pro. Click the *LOGIN* button in the upper right corner of the page and select *REGISTER* to create an account.
<img width="732" alt="3x2eZNxHSy" src="https://github.com/user-attachments/assets/86744c8f-a5c2-49a9-8f57-5ba6e8b6d448"/>
<br>
<br>

- Complete the registration process.
<br>

- On the Broadcom Support page type VMware Workstation Pro into the search bar and hit *Enter*.
<img width="485" alt="aOahLVlGu0" src="https://github.com/user-attachments/assets/b57eecbc-548c-462d-91af-726dbb817f40"/>
<br>
<br>

- Click the link provided in the first search result.
<img width="574" alt="DuEF88txIt" src="https://github.com/user-attachments/assets/861b2621-70c3-4348-b5b3-24dbe46f1a23"/>
<br>
<br>

- On the **Download and License VMware Desktop Hypervisor** page scroll down to the **Resolution** section and click the VMware Workstation Pro download link.
<img width="485" alt="Ko0XGIcA50" src="https://github.com/user-attachments/assets/0c1ff92d-64ee-4fa9-8b86-0d72d8f2ca69"/>
<br>
<br>

On the **Product Downloads** page select the download that corrlates to your host machines operating system, then select the latest version of VMware Workstation Pro to download.
<img width="946" alt="y4qkbIWONE" src="https://github.com/user-attachments/assets/49787bc4-4b5a-4b51-9298-b2a2a7311e59"/>
<br>
<br>
<img width="916" alt="2tdtvg6a5u" src="https://github.com/user-attachments/assets/50cd0729-5b7a-4650-9baa-5f2f6182216b"/>
<br>
<br>

- Click the *Terms and Conditions* link to view the product terms and conditions, then click the checkbox next to *I agree to the Terms and Conditions*. You are now able to click the download button towards the bottom right of the page.
<img width="951" alt="b8p6obhHKN" src="https://github.com/user-attachments/assets/132027d3-698b-4490-81c1-1ec37b9a1749" />
<br>
<br>

- Complete any remaining prompts to finish downloading.
<br>

- Proceed with installing VMware Workstation Pro to your host machine using all of the default settings.
<img width="371" alt="VMware-workstation-full-17 6 3-24583834_HBubLwhhvV" src="https://github.com/user-attachments/assets/6e4e3843-d1ac-4301-a7ae-b10a1c890b03" />
<br>
<br>

Now we need to change two of the default virtual network connections listed for VMware Workstation Pro. Go to *Edit > Virtual Network Editor*. Once the new pane appears, edit VMnet1 (host-only), VMnet8 (NAT), and the DHCP settings using the following steps:
<br>
<br>

- Click on *Change Settings*. Select the NAT (Network Address Translation) connection and change the subnet IP to 10.0.0.0 and click *Apply* to submit the change.
<img width="598" alt="FanQDiEhgc" src="https://github.com/user-attachments/assets/6d603160-99fa-48d5-811a-2fc3b2191751" />
<br>
<br>
<img width="473" alt="k32Vl1h0pt" src="https://github.com/user-attachments/assets/ffe3d5de-737e-43bf-af77-495e4a44e998" />
<br>
<br>

- Next, click *DHCP Settings* and change the starting IP so that it ends in .10. The next machine added will have an IP address of 10.0.0.11 and each subsequent machine's IP address will increment by one after that. Click *Apply* to submit the change.
<br>
<br>

- Lastly, select the host-only and change the starting IP for the connection to 172.16.0.0. Click *Apply* to submit the change, then click *Ok* to close the pane.
<br>
<br>
  
*For more information on virtual network connection types, refer to the Concept Dive section at the end of this write-up.*

## Kali Download and Configuration

## Metasploitable Download and Configuration

## FLARE VM Download and Configuration

## Wazuh (Ubuntu Server) Download and Configuration

## Ubuntu Client Download and Configuration

## Security Onion Download and Configuration

## Concept Dive
The concept dive section aims to provide a more in-depth examination of topics that deserve closer scrutiny. This section will spotlight areas that would benefit from thorough research and knowledge checks, as these are concepts that every cybersecurity professional should understand.s they are concepts that any cybersecurity professional should understand.

### Virtual Machine Connection Types
Let’s take a moment to explore the different types of network connections available for virtual machines. If you recall VMware Workstation Pro's Virtual Network Editor, we encountered three network connection types: bridged, host-only, and NAT (Network Address Translation).

**Bridged Mode -** When a virtual machine is using a bridged connection:
- The virtual machine obtains its own IP address from the LAN router's DHCP server, allowing it to function as a separate physical machine on the network.
- The virtual machine is directly connected to the physical network, enabling it to communicate with other devices on the network and access the Internet.
- The host machine's network adapter serves as a bridge, enabling the virtual machine's network traffic to flow from the virtualized environment to the physical network and subsequently to the external network (Internet).
- Used when the VM requires full network access and is directly addressable from the physical network's subnet.

**NAT (Network Address Translation) Mode -** When a virtual machine is using a NAT connection:
- The virtual machine is assigned a unique IP address by the hypervisor's DHCP server.
- To access the external network, Network Address Translation (NAT) is used to convert the virtual machine's IP address to the public IP address of the host machine. The host machine's public IP address is recorded in the host's NAT table. This setup enables the host machine to function as a router.
- NAT conceals the VM's IP address. The VM uses the host's public IP address on the Internet, making it seem as though network traffic originates from the host machine rather than the virtual machine.

**Host-Only Mode -** When a virtual machine is using a host-only connection:
- Isolates the virtual machine to establish a private connection with the host, allowing communication only with the host and other virtual machines in host-only mode.
- Establishes a secure sandboxed environment for malware analysis and reverse engineering.
- The virtual machine cannot access the external network (Internet) because it is isolated. Thus, it has no network access.
  
Understanding these connection types can help you choose the best option for your specific virtual machine requirements.
